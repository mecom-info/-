<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–ï–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ –ú–≠–ö–û–ú</title>
<meta name="description" content="–ú–ï–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏ (7‚Äì11). –ü—Ä–∞–≤–∏–ª–∞, —Å–µ—Ç–∫–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#f7fbff;
    --blue:#FF1493;
    --blue-2:#FF69B4;
    --soft:#ffa7dd;
    --muted:#6b7280;
    --card:#ffffff;
    --glass: rgba(255,255,255,0.8);
    --radius:14px;
    --maxwidth:1200px;
    --site-padding:18px;
    --base-font-size:15px;
    --ui-radius:12px;

    --prize-highlight-bg: linear-gradient(90deg,#fff5cc,#ffe680);
    --prize-highlight-color: #533f00;
    --prize-section-bg: linear-gradient(90deg,var(--blue),var(--blue-2));
  }

  /* Base sizing & reset */
  html { font-size: var(--base-font-size); box-sizing: border-box; }
  *,*::before,*::after{ box-sizing: inherit; }
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
    background: linear-gradient(180deg,var(--bg),#ffffff);
    color:#0b1220;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.45;
    -webkit-tap-highlight-color:transparent;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;height:auto;display:block}
  .wrap{max-width:var(--maxwidth);margin:0 auto;padding:var(--site-padding);box-sizing:border-box}

  /* ---------- HERO ---------- */
  header.hero{
    position:relative;
    overflow:hidden;
    border-radius:18px;
    padding:18px;
    background:
      radial-gradient(600px 120px at -10% 0%, rgba(37,98,255,0.06), transparent 60%),
      linear-gradient(180deg, rgba(8,36,102,0.04), rgba(255,255,255,0.9));
    box-shadow:0 8px 30px rgba(12,24,60,0.06);
    min-height:110px;
  }
  .hero-row{display:flex;gap:12px;align-items:center;position:relative; z-index:2}
  .logo{
    width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,var(--blue),var(--blue-2));
    display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:20px;
    flex-shrink:0;box-shadow:0 6px 18px rgba(41,82,255,0.16);
    transform-origin:center; animation:logo-bob 3s ease-in-out infinite;
  }
  @keyframes logo-bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
  .hero h1{font-size:18px;margin:0;color:var(--blue);letter-spacing:-0.2px}
  .hero .tag{margin-top:6px;color:var(--muted);font-size:13px}
  .hero .ctas{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
  .btn{
    display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;font-weight:700;font-size:14px;
    cursor:pointer;border:0;box-shadow:0 8px 24px rgba(10,30,120,0.06);
    align-self:flex-start;
  }
  .btn:focus{ outline: none; box-shadow: 0 0 0 4px rgba(0,91,255,0.10); }
  .btn-primary{background:linear-gradient(90deg,var(--blue),var(--blue-2));color:white; animation:btn-glow 2.4s infinite;}
  @keyframes btn-glow{0%{box-shadow:0 8px 20px rgba(0,91,255,0.14)}50%{box-shadow:0 14px 30px rgba(0,91,255,0.22)}100%{box-shadow:0 8px 20px rgba(0,91,255,0.14)}}
  .btn-ghost{background:#fff;border:1px solid rgba(10,40,120,0.06);color:var(--muted)}

  /* ---------- FLOATERS (behind content) ---------- */
  .floaters{
    position:absolute;
    inset:0;
    pointer-events:none;
    overflow:hidden;
    z-index:0;
    transition:opacity .28s ease, transform .28s ease;
    will-change: transform;
  }
  .floaters.hidden { opacity:0; transform: translateY(6px); pointer-events:none; }
  .riff {
    position:absolute;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg,var(--soft),#e6f3ff);color:var(--blue);opacity:0.95;box-shadow:0 6px 18px rgba(10,30,100,0.08);
    transform-origin:center;
    will-change:transform;
    pointer-events:none;
  }
  .riff.small{width:34px;height:34px}
  @keyframes riff-float {0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-12px) rotate(8deg)}100%{transform:translateY(0) rotate(0)}}

  /* ---------- SECTIONS ---------- */
  section{
    margin-top:18px;
    padding:16px;
    border-radius:14px;
    background:var(--card);
    box-shadow:0 8px 26px rgba(12,24,56,0.04);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  section.show { opacity: 1; transform: translateY(0); }
  h2{margin:0 0 8px 0;font-size:16px;color:var(--blue)}
  p.muted{color:var(--muted);font-size:13px;margin:0}
  .cols{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:720px){ .cols{grid-template-columns:1fr 360px} }

  /* ---------- HOW TO PLAY (cards) ---------- */
  .steps{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(max-width:480px){ .steps{grid-template-columns:1fr} }
  .card{
    background:linear-gradient(180deg,#fff,#fbfdff);
    padding:12px;border-radius:12px;border:1px solid rgba(10,40,120,0.04);
    display:flex;gap:10px;align-items:flex-start;transition:transform .28s ease, box-shadow .28s ease;
  }
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(30,60,140,0.08)}
  .icon{
    width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--blue),var(--soft));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;
    box-shadow:0 10px 24px rgba(10,60,200,0.08);flex-shrink:0;
  }
  .card h3{margin:0;font-size:15px;color:#0b234d}
  .card p{margin:6px 0 0 0;color:var(--muted);font-size:13px}

  .strategy{margin-top:8px;padding-left:12px}
  .strategy li{margin:6px 0;color:var(--muted);font-size:13px;line-height:1.4}

  /* ---------- PRIZES SECTION ---------- */
  .prizes-section{
    background: var(--prize-section-bg);
    color: #fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 12px 34px rgba(10,30,80,0.08);
    margin-top:12px;
  }
  .prizes-section .section-title{
    font-weight:800;
    margin:6px 0 10px 0;
    font-size:15px;
    display:flex;
    align-items:center;
    gap:10px;
    animation:prizesFadeIn 520ms cubic-bezier(.2,.9,.2,1);
  }
  .prizes-table{display:flex;flex-direction:column;gap:10px;margin-top:6px}
  .prize-row{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.06);font-weight:700;animation:prizeRowIn 420ms ease}
  .prize-row.highlight{
    background: var(--prize-highlight-bg);
    color: var(--prize-highlight-color);
    box-shadow:0 10px 30px rgba(255,193,7,0.06)
  }
  @keyframes prizesFadeIn { from{opacity:0;transform:translateY(-6px)} to{opacity:1;transform:none} }
  @keyframes prizeRowIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }

  /* ---------- WHY MEKOM ---------- */
  .why{display:flex;gap:12px;align-items:center}
  .why .text{flex:1}
  .badge{background:linear-gradient(90deg,var(--soft),#cfeaff);padding:8px 10px;border-radius:10px;color:var(--blue);font-weight:700}

  /* ---------- FORM ---------- */
  form input, form select, form textarea{width:100%;padding:10px;margin-top:8px;border-radius:10px;border:1px solid rgba(10,30,80,0.06);font-size:14px}
  .submit{margin-top:10px;width:100%}
  .small{font-size:13px;color:var(--muted)}
  a[href^="https://t.me"]{color:var(--blue);font-weight:700;text-decoration:none}
  a[href^="https://t.me"]:hover{ text-decoration:underline }

  footer{margin-top:14px;padding:14px;display:none;}

  /* typing helper */
  .typing{display:inline-block;white-space:nowrap;overflow:hidden;border-right:2px solid rgba(0,0,0,0.12)}

  /* small helpers */
  .flex{display:flex;gap:8px;align-items:center}
  .muted-2{color:#4b5563;font-size:13px}

  /* =========================
     –†–ò–§
     ========================= */
  .rif-section {
    padding: 14px;
    border-radius:12px;
    background: linear-gradient(180deg,#fff,#fbfdff);
    border:1px solid rgba(10,40,120,0.04);
    box-shadow:0 8px 26px rgba(12,24,56,0.04);
  }
  .rif-grid { display:grid; grid-template-columns: 1fr; gap:12px; align-items:stretch; }
  @media(min-width:720px){ .rif-grid { grid-template-columns: 1fr 320px; } }

  .rif-left { display:flex; flex-direction:column; gap:12px; }
  .rif-intro { font-size:14px; color:var(--muted); }
  .rif-cards { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
  @media(max-width:560px){ .rif-cards { grid-template-columns:1fr; } }

  .rif-factor {
    background:linear-gradient(180deg,#fff,#f7fbff);
    border-radius:12px;
    padding:10px;
    display:flex;
    gap:10px;
    align-items:center;
    border:1px solid rgba(10,40,120,0.04);
    cursor: pointer;
  }
  .rif-factor:focus { outline: none; }
  .rif-factor .svg-wrap { width:64px; height:64px; flex:0 0 64px; position:relative; }
  .rif-factor svg { display:block; width:64px; height:64px; }
  .rif-factor .label { font-weight:800; font-size:13px; color:#0b234d; }
  .rif-factor .desc { font-size:12px; color:var(--muted); margin-top:4px; }

  .rif-right { display:flex; flex-direction:column; gap:12px; align-items:stretch; }
  .rif-total {
    display:flex;align-items:center;gap:12px;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff,#f0f8ff);border:1px solid rgba(10,40,120,0.04);
  }
  .rif-total .total-value { font-weight:900; font-size:28px; color:var(--blue); }
  .rif-total .total-label { color:var(--muted); font-size:13px; }
  .rif-note { font-size:12px; color:var(--muted); }

  .accordion { margin-top:10px; border-radius:10px; overflow:hidden; border:1px solid rgba(10,40,120,0.04); background:linear-gradient(180deg,#fff,#fbfdff); }
  .accordion .trigger {
    display:flex; justify-content:space-between; align-items:center;
    width:100%; padding:12px; background:transparent; border:0; cursor:pointer;
    font-weight:800; color:var(--muted);
    border: 1px solid rgba(10,40,120,0.06);
  }
  .accordion .content { padding:0 12px; max-height:0; overflow:hidden; transition: max-height 320ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease; opacity:0; }
  .accordion.open .content { opacity:1; padding:12px; }
  .accordion .content p { margin:0; color:var(--muted); font-size:13px; line-height:1.45; }
  .accordion.open .trigger { color:var(--blue); }

  .rif-record-label {
    font-size: 11px;
    color: var(--blue);
    font-weight: 600;
    text-align: center;
    margin-top: 4px;
    line-height: 1.2;
  }

  /* ===========================================================
     MECOM BRACKET
     =========================================================== */
  .mecom-bracket{
    --me-blue:var(--blue);
    --me-blue-2:var(--blue-2);
    --me-soft:var(--soft);
    background: linear-gradient(90deg,rgba(7,48,159,0.03),rgba(0,91,255,0.02));
    border-radius:12px;
    padding:10px;
    box-sizing:border-box;
    color:#0b1220;
    font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  }
  .mecom-rounds-nav{display:flex;gap:6px;position:sticky;top:8px;z-index:5;margin-bottom:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;}
  .mecom-rounds-nav::-webkit-scrollbar{display:none;}
  .mecom-rounds-nav .mecom-chip{background:rgba(0,91,255,0.06);color:var(--me-blue);padding:8px 10px;border-radius:999px;font-weight:700;cursor:pointer;border:0;font-size:12px;white-space:nowrap;}
  .mecom-rounds-nav .mecom-chip.is-active{background:linear-gradient(90deg,var(--me-blue),var(--me-blue-2));color:#fff;}

  .mecom-swiper{position:relative;overflow:hidden;border-radius:10px;background:linear-gradient(180deg,#fff,#f7fbff);border:1px solid rgba(10,30,80,0.04);transition:height .26s ease;}
  .mecom-swiper-track{display:flex;width:100%;will-change:transform;transform:translate3d(0,0,0);transition:transform .26s ease;touch-action:pan-y;align-items:flex-start;}
  .mecom-slide{
    min-width:100%;
    padding:10px;
    align-self:flex-start;
    display:flex;
    flex-direction:column;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.5s ease;
  }
  .mecom-slide.show { opacity: 1; transform: translateY(0); }
  .mecom-round-title{font-weight:800;margin-bottom:8px;color:#0b234d;display:flex;justify-content:space-between;align-items:center}

  .pack{border-radius:12px;padding:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid rgba(10,40,120,0.04);margin-bottom:12px}
  .pack-title{font-weight:800;color:#0b234d;margin-bottom:8px;display:flex;align-items:center;gap:8px}
  .pack-contents{display:flex;flex-direction:column;gap:8px}
  .mecom-team{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:rgba(0,0,0,0.03);transition:box-shadow .18s ease}
  .mecom-team .left{display:flex;flex-direction:column;gap:6px;min-width:95px}
  .mecom-team .name-wrap{display:flex;flex-direction:column;align-items:flex-end;gap:4px}
  .mecom-team .team-name{font-weight:800;font-size:15px;color:#0b234d;white-space:nowrap}
  .mecom-team.empty-slot{opacity:0.6;font-style:italic;color:var(--muted);padding:6px 12px;height:28px;display:flex;align-items:center;justify-content:flex-end;}
  .mecom-team.placeholder{background:transparent;border:1px dashed rgba(0,0,0,0.03)}

  .mecom-tag{font-size:11px;font-weight:800;padding:4px 6px;border-radius:999px;line-height:1;display:inline-block}
  .mecom-tag-grade{background:rgba(0,0,0,0.06);color:#111}
  .mecom-tag-north{background:rgba(0,92,255,0.09);color:#003cff}
  .mecom-tag-south{background:rgba(255,59,59,0.10);color:#ff1f06}
  .mecom-tag-east{background:rgba(255,160,60,0.10);color:#ff5100}
  .mecom-tag-west{background:rgba(88,165,90,0.10);color:#35ff35}

  .mecom-team.winner{background:linear-gradient(90deg,var(--me-soft),#dff4ff);box-shadow:0 10px 30px rgba(0,110,255,0.06)}
  .mecom-team.winner .team-name{color:var(--blue)}
  .mecom-team.winner .team-name::after{content:" üèÖ";margin-left:8px}

  .mecom-team.champion{background: linear-gradient(90deg,#fff5cc,#ffe680);color:#533f00;border:1px solid rgba(255,193,7,0.12);box-shadow:0 12px 30px rgba(255,193,7,0.08)}
  .mecom-team.champion .team-name{ color:#533f00 }
  .mecom-team.champion .team-name::after{ content: " üëë"; margin-left:8px; }

  .promoted-note{font-size:12px;color:var(--muted);margin-top:6px}
  .mecom-dots{display:flex;justify-content:center;gap:6px;padding:10px 0 2px 0}
  .mecom-dot{width:8px;height:8px;border-radius:50%;background:rgba(0,0,0,0.15);cursor:pointer}
  .mecom-dot.is-active{background:var(--me-blue)}
  @media (max-width:560px){ .mecom-team .team-name{ font-size:14px } }

  /* outline-chip */
  .outline-chip {
    display:inline-flex;
    align-items:center;
    gap:10px;
    padding:8px 12px;
    border-radius:10px;
    border:2px solid var(--blue);
    background:transparent;
    color:var(--blue);
    font-weight:800;
    font-size:13px;
    cursor:pointer;
    transition:all .22s ease;
    box-shadow: 0 4px 12px rgba(6,30,80,0.04);
  }
  .outline-chip svg { width:18px; height:18px; flex:0 0 18px; display:block; }
  .outline-chip:hover {
    background: linear-gradient(90deg,var(--blue),var(--blue-2));
    color:#fff;
    transform:translateY(-3px);
    box-shadow: 0 12px 30px rgba(37,98,255,0.12);
  }
  .outline-chip:focus { outline: none; box-shadow: 0 0 0 4px rgba(0,91,255,0.10); }
  @media(max-width:540px){ .outline-chip{ width:100%; justify-content:center; } }

  /* =========================
     Responsive tweaks
     ========================= */
  @media (min-width:720px){
    :root { --base-font-size:15.5px; }
    .hero h1{ font-size:20px; }
    .hero .tag{ font-size:14px; }
    .wrap{ padding:20px; }
    header.hero{ padding:22px; min-height:140px; }
    .logo{ width:84px;height:84px;font-size:22px; border-radius:16px; }
    .btn{ padding:12px 16px; font-size:15px; border-radius:14px; }
  }
  @media (min-width:960px){
    :root { --base-font-size:16px; }
    .wrap{ padding:28px; }
    header.hero{ padding:28px 36px; min-height:160px; }
    .hero h1{ font-size:22px; }
    .hero .tag{ font-size:15px; }
    .logo{ width:92px;height:92px;font-size:24px; }
    .card{ padding:16px; }
    .icon{ width:56px;height:56px; }
    .steps{ grid-template-columns: repeat(3, 1fr); }
    .cols{ grid-template-columns: 1fr 360px; }
  }
  @media (min-width:1280px){
    :root { --base-font-size:17px; }
    .wrap{ padding:32px; }
    header.hero{ padding:34px 48px; min-height:200px; }
    .hero h1{ font-size:24px; }
    .hero .tag{ font-size:16px; }
    .logo{ width:108px;height:108px;font-size:28px; border-radius:18px; }
    .steps{ grid-template-columns: repeat(4, 1fr); gap:14px; }
    .card p{ font-size:14px; }
    .mecom-team .team-name{ font-size:16px; }
  }
  @media (min-width:1600px){
    .wrap{ padding:40px; }
    header.hero{ padding:44px 60px; min-height:240px; border-radius:20px; }
    .hero h1{ font-size:28px; }
    .hero .tag{ font-size:17px; }
    .logo{ width:120px;height:120px;font-size:30px; }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .logo, .riff, .btn-primary { 
      animation-duration: 1ms !important; 
      animation-iteration-count: 1 !important; 
      transition: none !important; 
    }
    section, .mecom-slide { 
      transition: none !important; 
      transform: none !important; 
      opacity: 1 !important; 
    }
  }

  /* =========================
     SECRET PIXEL (cleaned)
     ========================= */
  .secret-pixel {
    position: fixed;
    width: 1px;
    height: 1px;
    background: #000;
    cursor: pointer;
    z-index: 10000;
    transition: all 0.3s ease;
    pointer-events: auto;
  }
  .secret-pixel:hover {
    transform: scale(8);
    background: #FF1493;
    box-shadow: 0 0 20px rgba(255, 20, 147, 0.5);
  }
  .pixel-tooltip {
    position: absolute;
    font-size: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    white-space: nowrap;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
  }
  .secret-pixel:hover .pixel-tooltip { opacity: 1; }
  @keyframes pixelPop {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(12); opacity: 0.5; }
    100% { transform: scale(25); opacity: 0; }
  }
  .pixel-pop { animation: pixelPop 0.6s forwards; }

  /* Overlay + background (DEDUPED) */
  .overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: linear-gradient(45deg, #ff1493, #ff69b4, #ff85c2, #ffa7dd);
    z-index: 10000;
    overflow: hidden;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box;
  }
  .mekom-background {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    opacity: 0.15;
    pointer-events: none;
  }
  .mekom-text {
    position: absolute;
    font-size: 60px;
    font-weight: 900;
    color: rgba(255, 255, 255, 0.25);
    white-space: nowrap;
    font-family: 'Poppins', sans-serif;
    text-transform: uppercase;
    letter-spacing: 12px;
    animation: slideDiagonal 25s linear infinite;
    transform: rotate(-45deg);
  }
  .mekom-text:nth-child(1) { top: -100px; left: -200px; animation-delay: 0s; }
  .mekom-text:nth-child(2) { top: 150px; left: -200px; animation-delay: -6s; }
  .mekom-text:nth-child(3) { top: 400px; left: -200px; animation-delay: -12s; }
  .mekom-text:nth-child(4) { top: 650px; left: -200px; animation-delay: -18s; }
  @keyframes slideDiagonal {
    0% { transform: translateX(-100px) translateY(-100px) rotate(-45deg); }
    100% { transform: translateX(calc(100vw + 500px)) translateY(calc(100vh + 500px)) rotate(-45deg); }
  }

  .secret-mission-alert {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(11, 18, 32, 0.98);
    color: white;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 25px 80px rgba(0,0,0,0.8);
    z-index: 10002;
    width: 90%;
    max-width: 400px;
    max-height: 85vh;
    overflow-y: auto;
    border: 3px solid #FF1493;
    text-align: center;
    font-family: 'Poppins', sans-serif;
    backdrop-filter: blur(15px);
    display:flex;
    flex-direction:column;
  }

  .secret-mission-alert h3 {
    color: #FF1493;
    margin-bottom: 12px;
    font-size: 18px;
    line-height: 1.3;
    font-weight: 700;
  }
  .secret-mission-alert p { margin: 8px 0; line-height: 1.4; font-size: 13px; }
  .secret-mission-alert ol { text-align: left; margin: 10px 0; padding-left: 18px; }
  .secret-mission-alert li { margin: 6px 0; line-height: 1.3; font-size: 12px; }
  .secret-mission-alert .emoji { font-size: 24px; margin-bottom: 8px; }

  .copy-text-block {
    background: rgba(255, 20, 147, 0.25);
    padding: 12px;
    border-radius: 10px;
    border-left: 4px solid #FF1493;
    margin: 12px 0;
    font-weight: 700;
    font-size: 13px;
    line-height: 1.3;
    cursor: pointer;
    border: 2px solid rgba(255, 20, 147, 0.4);
    transition: background-color 0.2s ease;
    text-align: center;
  }
  .copy-text-block:hover { background: rgba(255, 20, 147, 0.3); }
  .copy-indicator { display: inline-block; margin-left: 6px; font-size: 11px; opacity: 0.8; transition: all 0.3s ease; vertical-align: middle; }

  .telegram-link {
    display: inline-block;
    background: linear-gradient(90deg, #0088cc, #00a2ff);
    color: white !important;
    text-decoration: none;
    padding: 8px 14px;
    border-radius: 18px;
    margin: 8px 0;
    font-weight: 700;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    box-shadow: 0 4px 15px rgba(0, 136, 204, 0.4);
    font-size: 13px;
  }
  .telegram-link:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 136, 204, 0.6); border-color: white; }
  .telegram-link::after { content: " üîó"; font-size: 13px; }

  .prize-note {
    font-size: 9px !important;
    color: #aaa !important;
    text-align: center;
    margin-top: 6px;
    line-height: 1.2;
    font-style: italic;
    border-top: 1px solid rgba(255,255,255,0.1);
    padding-top: 4px;
  }

  .close-button {
    background: linear-gradient(90deg, #FF1493, #FF69B4);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 22px;
    font-weight: 700;
    cursor: pointer;
    margin-top: 12px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s ease;
    font-size: 13px;
    width: 100%;
    max-width: 180px;
    box-shadow: 0 4px 15px rgba(255, 20, 147, 0.4);
    align-self:center;
  }
  .close-button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 20, 147, 0.6); }

  /* =========================
     Quick Settings (theme + music)
     ========================= */
  .quick-settings{
    margin-top:12px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-end;
    position:relative;
    z-index:3;
  }
  .qs-btn{
    border:1px solid rgba(10,40,120,0.10);
    background:rgba(255,255,255,0.85);
    color:#0b1220;
    padding:8px 10px;
    border-radius:999px;
    font-weight:800;
    font-size:12px;
    cursor:pointer;
    transition:transform .15s ease, box-shadow .15s ease, background .15s ease;
  }
  .qs-btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,0.06); }
  .qs-btn[aria-pressed="true"]{ background:linear-gradient(90deg,var(--blue),var(--blue-2)); color:#fff; border-color:transparent; }
  .qs-volume{
    display:flex;
    align-items:center;
    gap:8px;
    padding:6px 10px;
    border-radius:999px;
    background:rgba(255,255,255,0.85);
    border:1px solid rgba(10,40,120,0.10);
  }
  .qs-label{ font-size:12px; font-weight:800; color:var(--muted); }
  #musicVolume{ width:120px; }

  :root[data-theme="dark"]{
    --bg:#070A12;
    --card: rgba(255,255,255,0.06);
    --glass: rgba(255,255,255,0.08);
    --muted:#b7c0d1;
  }
  :root[data-theme="dark"] body{
    background: radial-gradient(900px 400px at 30% -10%, rgba(255,20,147,0.18), transparent 60%),
              radial-gradient(700px 360px at 90% 0%, rgba(255,105,180,0.14), transparent 55%),
              linear-gradient(180deg, #070A12, #05060a);
    color:#eef2ff;
  }
  :root[data-theme="dark"] section{
    box-shadow:0 14px 40px rgba(0,0,0,0.35);
    border:1px solid rgba(255,255,255,0.06);
  }
  :root[data-theme="dark"] header.hero{
    background:
      radial-gradient(700px 160px at -10% 0%, rgba(255,20,147,0.16), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
    box-shadow:0 18px 60px rgba(0,0,0,0.35);
  }
  :root[data-theme="dark"] .btn-ghost{
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.10);
    color:#e8ecff;
  }
</style>
</head>

<body>
  <div class="wrap">
    <!-- HERO -->
    <header class="hero" id="hero">
      <div class="floaters" aria-hidden="true">
        <div class="riff" id="riff-1" style="left:6%;top:10%" aria-hidden="true">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="12" cy="12" r="10" fill="white" opacity="0.06"/>
            <path d="M6 12c2-5 10-5 10 0-2 5-10 5-10 0z" fill="#005BFF" opacity="0.18"/>
          </svg>
        </div>
        <div class="riff small" id="riff-2" style="right:6%;top:22%" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 12c2-5 10-5 10 0-2 5-10 5-10 0z" fill="#2b7bff"/></svg>
        </div>
        <div class="riff" id="riff-3" style="left:8%;bottom:10%" aria-hidden="true">
          <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3c5 0 9 4 9 9s-4 9-9 9S3 17 3 12 7 3 12 3z" fill="#A7D8FF"/></svg>
        </div>
      </div>

      <div class="hero-row">
        <div class="logo" aria-hidden="true">
          <a href="https://www.youtube.com/watch?v=HIcSWuKMwOw" target="_blank" rel="noopener">–ú–ï–ú</a>
        </div>
        <div style="flex:1">
          <h1 id="hero-title">–ú–≠–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏–∫–∞, –∞–∑–∞—Ä—Ç –∏ —Ä–∏—Ñ</h1>
          <div class="tag muted">–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–ï–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã –º–µ–∂–¥—É —Å—Ç–∞—Ä—à–∏–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ (—Å 7 –ø–æ 11, –Æ–∂–Ω–æ–≥–æ –∏ –°–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞) —à–∫–æ–ª—ã –í–∑–º–∞—Ö</div>
          <div class="ctas">
            <button class="btn btn-primary" onclick="scrollToId('how-play')" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–µ–∫—Ü–∏–∏ '–ö–∞–∫ –∏–≥—Ä–∞—Ç—å'">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</button>
            <button class="btn btn-ghost" onclick="scrollToId('reg')" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–µ–∫—Ü–∏–∏ '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è'">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          </div>
        </div>
      </div>

      <!-- Quick Settings + Music -->
      <div class="quick-settings" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞">
        <button class="qs-btn" id="themeToggle" type="button" aria-pressed="false">üåô –¢–µ–º–∞</button>
        <button class="qs-btn" id="musicToggle" type="button" aria-pressed="false">‚ñ∂Ô∏è –ú—É–∑—ã–∫–∞</button>
        <div class="qs-volume">
          <span class="qs-label">–ì—Ä–æ–º–∫.</span>
          <input id="musicVolume" type="range" min="0" max="1" step="0.01" value="0.35" aria-label="–ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏">
        </div>
      </div>

      <!-- –ü–æ–ª–æ–∂–∏ —Ñ–∞–π–ª —Å—é–¥–∞: ./assets/sweden.mp3 -->
      <audio id="bgm" preload="none" loop>
        <source src="./assets/sweden.mp3" type="audio/mpeg">
      </audio>
    </header>

    <!-- ABOUT / WHAT IS MEKOM -->
    <section id="about" aria-labelledby="aboutTitle">
      <h2 id="aboutTitle">–ß—Ç–æ —Ç–∞–∫–æ–µ –ú–≠–ö–û–ú?</h2>
      <p class="muted">–ú–≠–ö–û–ú ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —à–∫–æ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞: –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Å–æ—Ä–µ–≤–Ω—É—é—Ç—Å—è –≤ —Å–µ—Ä–∏—è—Ö —Ä–∞—É–Ω–¥–æ–≤, –ø—Ä–∏–Ω–∏–º–∞—é—Ç –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏—è –∏ ¬´–∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç¬ª –Ω–∞–∏–≤—ã—Å—à–∏–π <strong>–†–ò–§ ‚Äî <i>—Ä–µ–π—Ç–∏–Ω–≥–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å —Ñ–∏—Ä–º—ã</i></strong>. –ß–µ–º –ª—É—á—à–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞, —Ç–µ–º –≤—ã—à–µ —à–∞–Ω—Å –ø—Ä–æ–π—Ç–∏ –≤ —Ñ–∏–Ω–∞–ª.</p>
      <div style="margin-top:12px" class="cols">
        <div>
          <div class="card" style="align-items:flex-start">
            <div class="icon" aria-hidden="true">–†</div>
            <div>
              <h3>–î–ª—è –∫–æ–≥–æ?</h3>
              <p class="muted">–ö–æ–º–∞–Ω–¥—ã –∫–ª–∞—Å—Å–æ–≤ 7‚Äì11 –∏–∑ –Æ–∂–Ω–æ–≥–æ –∏ –°–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–æ–≤. –ö–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ ‚Äî –Ω–æ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞—Ç—å —Å–º–µ–∫–∞–ª–∫—É.</p>
            </div>
          </div>

          <div class="card" style="margin-top:10px">
            <div class="icon" aria-hidden="true">‚öñ</div>
            <div>
              <h3>–¶–µ–ª—å</h3>
              <p class="muted">–ù–∞–±–∏—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª—å—à–∏–π —Ä–∏—Ñ –≤ –∏–≥—Ä–∞—Ö –∏ –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ —Ç—É—Ä–Ω–∏—Ä–Ω—É—é —Å–µ—Ç–∫—É –¥–æ —Ñ–∏–Ω–∞–ª–∞ ‚Äî —Ç–∞–º —Ä–µ—à–∞–µ—Ç—Å—è –≤—Å—ë.</p>
            </div>
          </div>
        </div>

        <aside class="bracket-info" style="padding:8px">
          <button type="button" class="outline-chip" aria-label="–ë–ª–∏–∂–∞–π—à–∏–π —á–µ–º–ø–∏–æ–Ω–∞—Ç ‚Äî –Æ–∂–Ω—ã–π —Ñ–∏–ª–∏–∞–ª. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Å–µ—Ç–∫–µ." onclick="scrollToId('tournament')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"/></svg>
            <span>–ë–ª–∏–∂–∞–π—à–∏–π —á–µ–º–ø–∏–æ–Ω–∞—Ç ‚Äî —é–∂–Ω—ã–π —Ñ–∏–ª–∏–∞–ª</span>
          </button>

          <p class="muted" style="margin-top:8px">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ –ú–ï–ö–û–ú (<a href="https://t.me/mekom_info" target="_blank" rel="noopener">@mekom_info</a>)</p>
          <div style="margin-top:12px" class="small muted-2">–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã: –Ø–Ω ¬∑ –ï–≥–æ—Ä ¬∑ –ê—Ä—Ç–µ–º–∏–π</div>
        </aside>
      </div>
    </section>

    <!-- TO WIN -->
    <section id="how" aria-labelledby="howTitle">
      <h2 id="howTitle">–ö–∞–∫ –≤—ã–∏–≥—Ä–∞—Ç—å –í–°–Å</h2>
      <div class="steps" style="margin-top:12px">
        <div class="card">
          <div class="icon">üë•</div>
          <div>
            <h3>1. –°–æ–±–µ—Ä–∏ –∫–æ–º–∞–Ω–¥—É</h3>
            <p class="muted">2‚Äì4 —á–µ–ª–æ–≤–µ–∫ –∏–∑ –∫–ª–∞—Å—Å–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–æ–ª–∏: –ø—É—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–≥—Ä–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—É—á–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ñ–æ—Ä–º—É–ª—ã –∏–≥—Ä—ã)</p>
          </div>
        </div>

        <div class="card">
          <div class="icon">üì•</div>
          <div>
            <h3>2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç</h3>
            <p class="muted">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç—á—ë—Ç –ø–æ —Ñ–∏—Ä–º–µ –∑–∞ –Ω—É–ª–µ–≤–æ–π –ø–µ—Ä–∏–æ–¥ –∏ —Ä–∞–∑–±–æ—Ä –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.</p>
          </div>
        </div>

        <div class="card">
          <div class="icon">‚öôÔ∏è</div>
          <div>
            <h3>3. –ò–≥—Ä–∞ –≤ —Ä–∞—É–Ω–¥–µ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∞–∂–Ω–µ–µ –∞–∑–∞—Ä—Ç–∞</h3>
            <p class="muted">–í –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è: –¥–æ–∫—É–ø–∞—Ç—å —Å—Ç–∞–Ω–∫–∏, –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤ —Ä–µ–∫–ª–∞–º—É, –ø–æ–≤—ã—à–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ —Ç. –ø.</p>
            <ul class="strategy">
              <li><strong>–†–∞–∑–±–µ—Ä–∏—Ç–µ —Å–≤–æ–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.</strong></li>
              <li><strong>–ù–µ –±–æ–π—Ç–µ—Å—å –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.</strong> –°–º–µ–ª–æ—Å—Ç—å + —Ä–∞—Å—á—ë—Ç = –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.</li>
            </ul>
          </div>
        </div>

        <div class="card">
          <div class="icon">üéØ</div>
          <div>
            <h3>4. –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–π</h3>
            <p class="muted">–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ ‚Üí –í—Ç–æ—Ä–∞—è —Å—Ç–∞–¥–∏—è ‚Üí –ü–æ–ª—É—Ñ–∏–Ω–∞–ª ‚Üí –§–∏–Ω–∞–ª ‚Üí –ü–æ–±–µ–¥–∏—Ç–µ–ª—å.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- HOW TO PLAY -->
    <section id="how-play" aria-labelledby="howPlayTitle">
      <h2 id="howPlayTitle">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å ‚Äî —Å—É—Ç—å –∏ —Ä–µ—à–µ–Ω–∏—è</h2>
      <p class="muted">–í –∫–∞–∂–¥–æ–º –ø–µ—Ä–∏–æ–¥–µ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ 5 –∫–ª—é—á–µ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏—Ä–º—ã –∏ –≤–ª–∏—è—é—Ç –Ω–∞ –†–ò–§.</p>

      <div class="steps" style="margin-top:12px">
        <div class="card small">
          <div class="icon">1</div>
          <div>
            <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É</h3>
            <p class="muted">–¶–µ–Ω–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–ø—Ä–æ—Å, –º–∞—Ä–∂—É –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">2</div>
          <div>
            <h3>–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</h3>
            <p class="muted">–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–±—Ä–∏–∫–∏.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">3</div>
          <div>
            <h3>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</h3>
            <p class="muted">–í–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∫–ª–∞–º—É –ø–æ–≤—ã—à–∞—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å–ø—Ä–æ—Å–∞.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">4</div>
          <div>
            <h3>–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h3>
            <p class="muted">–ê–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ –∫–∞–ø–≤–ª–æ–∂–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –º–æ—â–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">5</div>
          <div>
            <h3>–ù–ò–û–ö–†</h3>
            <p class="muted">–ü–æ–≤—ã—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- RIF -->
    <section id="rif" class="rif-section" aria-labelledby="rif-title" style="margin-top:16px;">
      <h2 id="rif-title">–ß—Ç–æ —Ç–∞–∫–æ–µ –†–ò–§?</h2>
      <div class="rif-grid" style="margin-top:10px;">
        <div class="rif-left">
          <div class="rif-intro">
            <strong>–†–ò–§ (–†–µ–π—Ç–∏–Ω–≥–æ–≤—ã–π –ò–Ω–¥–µ–∫—Å –§–∏—Ä–º—ã)</strong> ‚Äî –∏–≥—Ä–æ–≤–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–∏—Ä–º—ã –≤ —Ç—É—Ä–Ω–∏—Ä–µ. –û–Ω —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑ —à–µ—Å—Ç–∏ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (–¥–µ–º–æ-–∑–Ω–∞—á–µ–Ω–∏—è).
          </div>
        </div>

        <div class="rif-right" aria-hidden="false">
          <div class="rif-total" role="status" aria-live="polite">
            <div style="flex:1">
              <div class="total-label">–ê–±—Å–æ–ª—é—Ç–Ω—ã–π —Ä–µ–∫–æ—Ä–¥ –†–ò–§–∞!</div>
              <div class="total-value" id="rifTotal">0</div>
              <div class="rif-note">–ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å + –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å–ø—Ä–æ—Å–∞ + –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å + –î–æ–ª—è —Ä—ã–Ω–∫–∞ + –†–æ—Å—Ç</div>
            </div>
            <div style="width:120px; text-align:center;">
              <svg viewBox="0 0 36 36" width="80" height="80" aria-hidden="true">
                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                      fill="none" stroke="rgba(0,0,0,0.06)" stroke-width="3.2"></path>
                <path class="total-ring" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                      fill="none" stroke="url(#tg)" stroke-width="3.2" stroke-linecap="round"
                      stroke-dasharray="100 100" stroke-dashoffset="100"></path>
                <defs>
                  <linearGradient id="tg" x1="0" x2="1">
                    <stop offset="0" stop-color="var(--blue)"/><stop offset="1" stop-color="var(--blue-2)"/>
                  </linearGradient>
                </defs>
                <text x="18" y="21" font-size="8" text-anchor="middle" fill="#0b234d" font-weight="800" id="totalDonutText">0</text>
              </svg>
              <div class="rif-record-label">–ù–∞–∏–≤—ã—Å—à–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –†–ò–§–∞ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–≥—Ä–µ!</div>
            </div>
          </div>

          <div class="rif-cards" aria-hidden="false">
            <!-- Profit -->
            <div class="rif-factor" data-factor="profit" role="group" aria-label="–ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g1)" fill="none"></circle>
                  <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ff7b00"/><stop offset="1" stop-color="#ffa726"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="20" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                <div class="desc">–ö–ª—é—á–µ–≤–æ–π –≤–∫–ª–∞–¥ (–¥–µ–º–æ).</div>
              </div>
            </div>

            <!-- Demand -->
            <div class="rif-factor" data-factor="demand" role="group" aria-label="–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å–ø—Ä–æ—Å–∞">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g2)" fill="none"></circle>
                  <defs><linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#00aaff"/><stop offset="1" stop-color="#66b8ff"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="18" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å–ø—Ä–æ—Å–∞</div>
                <div class="desc">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ù–ò–û–ö–† (–¥–µ–º–æ).</div>
              </div>
            </div>

            <!-- Supply -->
            <div class="rif-factor" data-factor="supply" role="group" aria-label="–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g3)" fill="none"></circle>
                  <defs><linearGradient id="g3" x1="0" x2="1"><stop offset="0" stop-color="#45c67a"/><stop offset="1" stop-color="#8fe0a1"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="18" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</div>
                <div class="desc">–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ—â–Ω–æ—Å—Ç–∏ (–¥–µ–º–æ).</div>
              </div>
            </div>

            <!-- Efficiency -->
            <div class="rif-factor" data-factor="efficiency" role="group" aria-label="–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g4)" fill="none"></circle>
                  <defs><linearGradient id="g4" x1="0" x2="1"><stop offset="0" stop-color="#ffb400"/><stop offset="1" stop-color="#ffd66e"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="18" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                <div class="desc">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–±—Ä–∏–∫–∏ (–¥–µ–º–æ).</div>
              </div>
            </div>

            <!-- Market -->
            <div class="rif-factor" data-factor="market" role="group" aria-label="–î–æ–ª—è —Ä—ã–Ω–∫–∞">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g5)" fill="none"></circle>
                  <defs><linearGradient id="g5" x1="0" x2="1"><stop offset="0" stop-color="#ff5b9a"/><stop offset="1" stop-color="#ff87c6"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="18" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–î–æ–ª—è —Ä—ã–Ω–∫–∞</div>
                <div class="desc">–î–æ–ª—è –ø—Ä–æ–¥–∞–∂ (–¥–µ–º–æ).</div>
              </div>
            </div>

            <!-- Growth -->
            <div class="rif-factor" data-factor="growth" role="group" aria-label="–†–æ—Å—Ç">
              <div class="svg-wrap" aria-hidden="true">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <circle cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.06)" stroke-width="12" fill="none"></circle>
                  <circle class="ring" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round" stroke="url(#g6)" fill="none"></circle>
                  <defs><linearGradient id="g6" x1="0" x2="1"><stop offset="0" stop-color="#7b61ff"/><stop offset="1" stop-color="#b79bff"/></linearGradient></defs>
                  <text x="50" y="58" text-anchor="middle" font-size="18" font-weight="800" fill="#0b234d" class="ring-value">0</text>
                </svg>
              </div>
              <div style="flex:1">
                <div class="label">–†–æ—Å—Ç</div>
                <div class="desc">–¢–µ–º–ø —Ä–æ—Å—Ç–∞ —Å–±—ã—Ç–∞ (–¥–µ–º–æ).</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="rif-fact" aria-hidden="false" style="margin-top:12px;">
        <button class="trigger" aria-expanded="false" aria-controls="rif-fact-content">–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç <span aria-hidden="true">‚ñæ</span></button>
        <div class="content" id="rif-fact-content">
          <p>
            –í –Ω—É–ª–µ–≤–æ–º –ø–µ—Ä–∏–æ–¥–µ –≤—Å–µ —Ñ–∏—Ä–º—ã —Å—Ç–∞—Ä—Ç—É—é—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –†–ò–§, –∫–æ—Ç–æ—Ä—ã–π —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑ —à–µ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ë–∞–∑–æ–≤—ã–π –†–ò–§ = <strong>100</strong> –ø—É–Ω–∫—Ç–æ–≤.
          </p>
          <p style="margin-top:8px;color:#334155;font-style:italic;">–ö–æ—Ä–æ—Ç–∫–æ: –Ω–æ–ª—å ‚Äî —ç—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–π ¬´100¬ª. –í—Å—ë, —á—Ç–æ –¥–∞–ª—å—à–µ ‚Äî –≤–æ–ø—Ä–æ—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.</p>
        </div>
      </div>
    </section>

    <!-- PRIZES -->
    <section id="prizes" class="prizes-section" aria-label="–ü—Ä–∏–∑–æ–≤—ã–µ">
      <div class="section-title">üèÜ –ü—Ä–∏–∑–æ–≤—ã–µ –Ω–∞ –ß–µ–º–ø–∏–æ–Ω–∞—Ç</div>
      <div class="prizes-table" role="list" aria-hidden="false">
        <div class="prize-row highlight" role="listitem">
          <div class="label">1 –º–µ—Å—Ç–æ</div>
          <div class="value"><span class="counter" data-target="1000001">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">2 –º–µ—Å—Ç–æ</div>
          <div class="value"><span class="counter" data-target="500000">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">3 –º–µ—Å—Ç–æ</div>
          <div class="value"><span class="counter" data-target="250000">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">–§–∏–Ω–∞–ª</div>
          <div class="value"><span class="counter" data-target="100000">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">–ü–æ–ª—É—Ñ–∏–Ω–∞–ª</div>
          <div class="value"><span class="counter" data-target="75000">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">–í—Ç–æ—Ä–∞—è —Å—Ç–∞–¥–∏—è</div>
          <div class="value"><span class="counter" data-target="25000">0</span> —ç–∫—Å–∏</div>
        </div>
        <div class="prize-row" role="listitem">
          <div class="label">–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ</div>
          <div class="value"><span class="counter" data-target="10000">0</span> —ç–∫—Å–∏</div>
        </div>
      </div>
    </section>

    <!-- TOURNAMENT -->
    <section id="tournament" aria-label="–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞">
      <h2>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ ‚Äî —ç—Ç–∞–ø—ã</h2>

      <div id="mecom-bracket" class="mecom-bracket" data-storage-key="mecom_bracket_state_v4" data-auto-seed="true">
        <div class="mecom-rounds-nav" id="mecomRoundsNav" role="tablist" aria-label="–†–∞—É–Ω–¥—ã"></div>
        <div class="mecom-swiper" id="mecomSwiper" aria-live="polite">
          <div class="mecom-swiper-track" id="mecomSwiperTrack"></div>
        </div>
        <div class="mecom-dots" id="mecomDots" aria-hidden="true"></div>
      </div>
    </section>

    <!-- WHY -->
    <section id="why">
      <h2>–ü–æ—á–µ–º—É –º—ã ‚Äî –ú–ï–ö–û–ú?</h2>
      <div class="why" style="margin-top:8px">
        <div class="badge"><a href="https://t.me/nowkies/3081" target="_blank" rel="noopener">–õ–µ–≥–µ–Ω–¥–∞</a></div>
        <div class="text">
          <p class="muted">–ö–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—é, —Ä–µ—à–∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ª—ë–≥–∫–∏–π —Ä–µ–≤–µ—Ä–∞–Ω—Å –≤ —Å—Ç–æ—Ä–æ–Ω—É –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –ú–∞—Ä–∏–Ω—ã –ï–≥–æ—Ä–æ–≤–Ω—ã ‚Äî –≤–∑—è–ª–∏ –µ—ë ¬´–ú–ï¬ª –∏ –¥–æ–∫—Ä—É—Ç–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ. –¢–µ–ø–µ—Ä—å –ú–ï–ö–û–ú ‚Äî —ç—Ç–æ –∏ –ø—Ä–æ –Ω–∞—Å, –∏ –ø—Ä–æ –∏–≥—Ä—É, –∏ –ø—Ä–æ –∫—Ä–µ–∞—Ç–∏–≤.</p>
        </div>
      </div>
    </section>

    <!-- REG -->
    <section id="reg">
      <h2>–ö–∞–∫ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ</h2>
      <p class="muted">–°–æ–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ä–∞—É–Ω–¥–∞–º. –ó–∞–ø–æ–ª–Ω–∏–≤ —Ñ–æ—Ä–º—É, –≤—ã —Å–ø—É—Å—Ç—è –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–∞–∑ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –í —Å–ª—É—á–∞–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–µ, –∞ –∏–º–µ–Ω–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ—Ç–±–æ—Ä–æ—á–Ω—ã–µ!</p>

      <a class="btn btn-primary submit" href="https://forms.gle/Zo1daNJ5sn5e5AcJ6" target="_blank" rel="noopener noreferrer" aria-label="–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É ‚Äî –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ">
        –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—á–∞—Å—Ç–∏–µ
      </a>
    </section>

    <!-- CONTACTS -->
    <section>
      <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <p class="muted">
        –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: <a href="https://t.me/mekom_info" target="_blank" rel="noopener">@mekom_info</a><br/>
        –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="https://t.me/mekom_chat" target="_blank" rel="noopener">@mekom_chat</a>
      </p>
    </section>

    <footer role="contentinfo"></footer>
  </div>

<script>
"use strict";

/* =========================
   Helpers
   ========================= */
function scrollToId(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.scrollIntoView({behavior:'smooth',block:'start'});
}
function formatNumber(n){ return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "); }

if(typeof window.animateCounter !== 'function'){
  window.animateCounter = function(el, target, duration=1200){
    const startTime = performance.now();
    const from = 0;
    function step(now){
      const t = Math.min((now - startTime) / duration, 1);
      const value = Math.floor(from + (target - from) * t);
      el.textContent = formatNumber(value);
      if(t < 1) requestAnimationFrame(step);
      else el.textContent = formatNumber(target);
    }
    requestAnimationFrame(step);
  };
}

/* =========================
   Sections fade-in
   ========================= */
(function initFadeIn(){
  const sections = document.querySelectorAll('section');
  if(!sections.length) return;
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('show');
        io.unobserve(e.target);
      }
    });
  }, {threshold: 0.10, rootMargin: '0px 0px -50px 0px'});
  sections.forEach(s=>io.observe(s));
})();

/* =========================
   Prize counters
   ========================= */
(function initPrizeCounters(){
  const counters = document.querySelectorAll('.counter');
  if(!counters.length) return;
  const cIO = new IntersectionObserver((entries, obs)=>{
    entries.forEach(en=>{
      if(en.isIntersecting){
        const el = en.target;
        const tgt = parseInt(el.dataset.target, 10) || 0;
        animateCounter(el, tgt, 1300);
        obs.unobserve(el);
      }
    });
  }, {threshold: 0.4});
  counters.forEach(c=> cIO.observe(c));
})();

/* =========================
   Floaters (optimized scroll via rAF)
   ========================= */
(function initFloaters(){
  const floaters = Array.from(document.querySelectorAll('.riff'));
  const floatersContainer = document.querySelector('.floaters');
  if(!floaters.length || !floatersContainer) return;

  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  function positionFloaters(){
    const w = window.innerWidth || document.documentElement.clientWidth;
    if(w >= 1400){
      if(floaters[0]) { floaters[0].style.left = '2%'; floaters[0].style.top = '8%'; floaters[0].style.right = ''; }
      if(floaters[1]) { floaters[1].style.right = '2%'; floaters[1].style.top = '14%'; floaters[1].style.left = ''; }
      if(floaters[2]) { floaters[2].style.right = '6%'; floaters[2].style.bottom = '6%'; floaters[2].style.left = ''; floaters[2].style.top = ''; }
    } else if(w >= 960){
      if(floaters[0]) { floaters[0].style.left = '3%'; floaters[0].style.top = '10%'; floaters[0].style.right = ''; }
      if(floaters[1]) { floaters[1].style.right = '4%'; floaters[1].style.top = '16%'; floaters[1].style.left = ''; }
      if(floaters[2]) { floaters[2].style.left = '6%'; floaters[2].style.bottom = '10%'; floaters[2].style.right = ''; floaters[2].style.top = ''; }
    } else {
      if(floaters[0]) { floaters[0].style.left = '6%'; floaters[0].style.top = '10%'; floaters[0].style.right = ''; }
      if(floaters[1]) { floaters[1].style.right = '6%'; floaters[1].style.top = '22%'; floaters[1].style.left = ''; }
      if(floaters[2]) { floaters[2].style.left = '8%'; floaters[2].style.bottom = '10%'; floaters[2].style.right = ''; floaters[2].style.top = ''; }
    }
  }

  floaters.forEach((el, i)=>{
    el.style.pointerEvents = 'none';
    if(!reduce){
      const dur = 4 + (i % 3);
      el.style.animation = `riff-float ${dur}s ${i*0.28}s ease-in-out infinite`;
    } else {
      el.style.animation = 'none';
    }
    el.style.zIndex = '0';
  });

  if(!reduce){
    let rafId = 0;
    window.addEventListener('scroll', ()=>{
      if(rafId) return;
      rafId = requestAnimationFrame(()=>{
        const sc = window.scrollY || window.pageYOffset || 0;
        floatersContainer.style.transform = `translateY(${sc * 0.02}px)`;
        rafId = 0;
      });
    }, {passive:true});
  } else {
    floatersContainer.style.transform = 'none';
  }

  const tournamentEl = document.getElementById('mecomSwiper');
  if(tournamentEl){
    const obs = new IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        if(en.isIntersecting) floatersContainer.classList.add('hidden');
        else floatersContainer.classList.remove('hidden');
      });
    }, {threshold: 0.02});
    obs.observe(tournamentEl);
  }

  window.addEventListener('resize', positionFloaters, {passive:true});
  positionFloaters();
})();

/* =========================
   Hero typing
   ========================= */
(function typeTitle(){
  const el = document.getElementById('hero-title');
  if(!el) return;
  const text = el.textContent.trim();
  el.textContent = '';
  let idx = 0;
  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(reduce){ el.textContent = text; return; }
  function tick(){
    if(idx <= text.length){
      el.textContent = text.slice(0, idx);
      idx++;
      setTimeout(tick, 22);
    } else {
      el.style.borderRight = 'none';
    }
  }
  tick();
})();

/* =========================
   RIF (optimized: removed dead bar logic)
   ========================= */
(function initRif(){
  const rifSection = document.querySelector('#rif');
  if(!rifSection) return;

  const MAX = { profit: 500, demand: 20, supply: 20, efficiency: 10, market: 20, growth: 20 };
  const demo = { profit: 317, demand: 12, supply: 10, efficiency: 8, market: 5, growth: 15 };
  const LAST_GAME_RIF = 299;

  const factorEls = document.querySelectorAll('.rif-factor');
  const totalEl = document.querySelector('#rifTotal');
  const totalDonutText = document.querySelector('#totalDonutText');
  const totalRing = document.querySelector('.total-ring');

  const factors = {
    profit: { cur: demo.profit, max: MAX.profit },
    demand: { cur: demo.demand, max: MAX.demand },
    supply: { cur: demo.supply, max: MAX.supply },
    efficiency: { cur: demo.efficiency, max: MAX.efficiency },
    market: { cur: demo.market, max: MAX.market },
    growth: { cur: demo.growth, max: MAX.growth }
  };
  const totalPoints = Object.keys(factors).reduce((s,k)=> s + factors[k].cur, 0);

  function prepareRings(){
    factorEls.forEach(el=>{
      const ring = el.querySelector('.ring');
      if(!ring) return;
      const r = parseFloat(ring.getAttribute('r')) || 42;
      const circumference = 2 * Math.PI * r;
      ring.style.strokeDasharray = String(circumference);
      ring.style.strokeDashoffset = String(circumference);
    });
  }
  prepareRings();

  function animateRif(){
    const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    factorEls.forEach((el, idx)=>{
      const key = el.dataset.factor;
      const f = factors[key];
      if(!f) return;
      const ring = el.querySelector('.ring');
      const textNode = el.querySelector('.ring-value');
      if(!ring) return;

      const pct = (f.max > 0) ? Math.round((f.cur / f.max) * 100) : 100;
      const circumference = parseFloat(ring.style.strokeDasharray) || (2 * Math.PI * 42);
      const offset = circumference * (1 - (pct / 100));

      if(reduce){
        ring.style.transition = 'none';
        ring.style.strokeDashoffset = offset;
        if(textNode) textNode.textContent = String(f.cur);
      } else {
        ring.style.transition = 'stroke-dashoffset 1100ms cubic-bezier(.2,.9,.2,1)';
        setTimeout(()=> { ring.style.strokeDashoffset = offset; }, idx * 80);
        if(textNode){
          const start = performance.now();
          const duration = 900;
          (function tick(now){
            const t = Math.min((now - start)/duration, 1);
            textNode.textContent = String(Math.floor(f.cur * t));
            if(t < 1) requestAnimationFrame(tick);
            else textNode.textContent = String(f.cur);
          })(performance.now());
        }
      }
    });

    const totalValue = LAST_GAME_RIF;
    const totalPercentage = (LAST_GAME_RIF / totalPoints) * 100;

    if(reduce){
      if(totalEl) totalEl.textContent = String(totalPoints);
      if(totalDonutText) totalDonutText.textContent = String(totalValue);
      if(totalRing) totalRing.style.strokeDashoffset = String(100 - totalPercentage);
    } else {
      if(totalEl){
        const start = performance.now();
        const duration = 1100;
        (function tick(now){
          const t = Math.min((now - start)/duration, 1);
          totalEl.textContent = String(Math.floor(totalPoints * t));
          if(t < 1) requestAnimationFrame(tick);
          else totalEl.textContent = String(totalPoints);
        })(performance.now());
      }
      if(totalRing){
        totalRing.style.transition = 'stroke-dashoffset 1100ms cubic-bezier(.2,.9,.2,1)';
        setTimeout(()=> totalRing.style.strokeDashoffset = String(100 - totalPercentage), 30);
      }
      if(totalDonutText){
        const start = performance.now();
        const duration = 1100;
        (function tick(now){
          const t = Math.min((now - start)/duration, 1);
          totalDonutText.textContent = String(Math.floor(totalValue * t));
          if(t < 1) requestAnimationFrame(tick);
          else totalDonutText.textContent = String(totalValue);
        })(performance.now());
      }
    }
  }

  const obs = new IntersectionObserver((entries, o)=>{
    entries.forEach(en=>{
      if(en.isIntersecting){
        animateRif();
        o.unobserve(en.target);
      }
    });
  }, {threshold: 0.18});
  obs.observe(rifSection);

  factorEls.forEach(fe=>{ fe.tabIndex = 0; });
})();

/* =========================
   Accordion
   ========================= */
(function initAccordion(){
  const accordions = document.querySelectorAll('.accordion');
  if(!accordions.length) return;
  accordions.forEach(acc=>{
    const trigger = acc.querySelector('.trigger');
    const content = acc.querySelector('.content');
    if(!trigger || !content) return;

    content.style.maxHeight = '0px';
    content.style.opacity = '0';

    trigger.addEventListener('click', ()=>{
      const open = acc.classList.contains('open');
      if(open){
        acc.classList.remove('open');
        trigger.setAttribute('aria-expanded', 'false');
        const h = content.scrollHeight;
        content.style.maxHeight = h + 'px';
        requestAnimationFrame(()=> {
          content.style.maxHeight = '0px';
          content.style.opacity = '0';
        });
        setTimeout(()=> { content.style.padding = '0 12px'; }, 320);
      } else {
        acc.classList.add('open');
        trigger.setAttribute('aria-expanded', 'true');
        content.style.padding = '12px';
        const h = content.scrollHeight;
        content.style.maxHeight = h + 'px';
        content.style.opacity = '1';
        setTimeout(()=> { content.style.maxHeight = 'none'; }, 400);
      }
    });
  });
})();

/* ===========================================================
   MECOM BRACKET (optimized mousemove binding)
   =========================================================== */
(function(){
  const qs = (s, r=document) => r.querySelector(s);
  const qsa = (s, r=document) => Array.from((r||document).querySelectorAll(s));
  const RENDER_OPTIONS = { keepEmptySlots: false };

  const TOURNAMENT_DATA = [
    {
      name: "–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ",
      packs: [
        { title: "–ü–∞—á–∫–∞ A ‚Äî 7 –∫–ª–∞—Å—Å", teams: [
          { name: "enhereum", grade: "7", branch: "–Æ–≥" },
          { name: "Buymeraf", grade: "7", branch: "–Æ–≥" },
          { name: "7h384115", grade: "7", branch: "–Æ–≥" },
          { name: "Baldi", grade: "7", branch: "–Æ–≥" },
          { name: "Oguzki", grade: "7", branch: "–Æ–≥" },
          { name: "Koshkas", grade: "7", branch: "–Æ–≥" },
          { name: "Bogini", grade: "7", branch: "–Æ–≥" },
          { name: "456KG", grade: "7", branch: "–Æ–≥" },
          { name: "Gavriki", grade: "7", branch: "–Æ–≥" },
          { name: "AZKG61TM", grade: "7", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4,5] },
        { title: "–ü–∞—á–∫–∞ B ‚Äî 8 –∫–ª–∞—Å—Å", teams: [
          { name: "BapeAape", grade: "8", branch: "–Æ–≥" },
          { name: "Bam", grade: "8", branch: "–Æ–≥" },
          { name: "Smelost", grade: "8", branch: "–Æ–≥" },
          { name: "Vishni", grade: "8", branch: "–Æ–≥" },
          { name: "Ermogagi", grade: "8", branch: "–Æ–≥" },
          { name: "Vetchina", grade: "8", branch: "–Æ–≥" },
          { name: "SV", grade: "8", branch: "–Æ–≥" },
          { name: "Mutagen", grade: "8", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4,5] },
        { title: "–ü–∞—á–∫–∞ C ‚Äî 9 –∫–ª–∞—Å—Å", teams: [
          { name: "Kozlatki", grade: "9", branch: "–Æ–≥" },
          { name: "Xex", grade: "9", branch: "–Æ–≥" },
          { name: "OOOBNAL", grade: "9", branch: "–Æ–≥" },
          { name: "Red bull", grade: "9", branch: "–Æ–≥" },
          { name: "MMM", grade: "9", branch: "–Æ–≥" },
          { name: "Didiblad", grade: "9", branch: "–Æ–≥" },
          { name: "Mstiteli", grade: "9", branch: "–Æ–≥" },
          { name: "Apelsin", grade: "9", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4,5] },
        { title: "–ü–∞—á–∫–∞ D ‚Äî 10 –∫–ª–∞—Å—Å", teams: [
          { name: "SAMO", grade: "10", branch: "–Æ–≥" },
          { name: "BIMBO", grade: "10", branch: "–Æ–≥" },
          { name: "MEOW", grade: "10", branch: "–Æ–≥" },
          { name: "Eighteff", grade: "10", branch: "–Æ–≥" },
          { name: "Selo", grade: "10", branch: "–Æ–≥" },
          { name: "DEFENDER", grade: "10", branch: "–Æ–≥" },
          { name: "TeamH 2G", grade: "10", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4,5] },
        { title: "–ü–∞—á–∫–∞ E ‚Äî 11 –∫–ª–∞—Å—Å", teams: [
          { name: "Foot‚Äôa", grade: "11", branch: "–Æ–≥" },
          { name: "Foot‚Äôa 2", grade: "11", branch: "–Æ–≥" },
          { name: "Kelden", grade: "11", branch: "–Æ–≥" },
          { name: "TeK_lan", grade: "11", branch: "–Æ–≥" }
        ], winnerIndex: [0] }
      ]
    },
    {
      name: "–í—Ç–æ—Ä–∞—è —Å—Ç–∞–¥–∏—è",
      packs: [
        { title: "–ü–∞—á–∫–∞ F ‚Äì 78 —Ä–µ–≥–∏–æ–Ω", teams: [
          { name: "Koshkas", grade: "7", branch: "–Æ–≥" },
          { name: "7h384115", grade: "7", branch: "–Æ–≥" },
          { name: "Ermogagi", grade: "8", branch: "–Æ–≥" },
          { name: "Buymeraf", grade: "7", branch: "–Æ–≥" },
          { name: "Bam", grade: "8", branch: "–Æ–≥" },
          { name: "BapeAape", grade: "8", branch: "–Æ–≥" },
          { name: "enhereum", grade: "7", branch: "–Æ–≥" },
          { name: "Baldi", grade: "7", branch: "–Æ–≥" },
          { name: "Vishni", grade: "8", branch: "–Æ–≥" },
          { name: "Smelost", grade: "8", branch: "–Æ–≥" },
          { name: "Oguzki", grade: "7", branch: "–Æ–≥" },
          { name: "Vetchina", grade: "8", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4] },
        { title: "–ü–∞—á–∫–∞ G ‚Äî 9/10/11", teams: [
          { name: "SAMO", grade: "10", branch: "–Æ–≥" },
          { name: "MMM", grade: "9", branch: "–Æ–≥" },
          { name: "Selo", grade: "10", branch: "–Æ–≥" },
          { name: "Foot‚Äôa", grade: "11", branch: "–Æ–≥" },
          { name: "Xex", grade: "9", branch: "–Æ–≥" },
          { name: "Kozlatki", grade: "9", branch: "–Æ–≥" },
          { name: "MEOW", grade: "10", branch: "–Æ–≥" },
          { name: "BIMBO", grade: "10", branch: "–Æ–≥" },
          { name: "DEFENDER", grade: "10", branch: "–Æ–≥" },
          { name: "Red bull", grade: "9", branch: "–Æ–≥" },
          { name: "OOOBNAL", grade: "9", branch: "–Æ–≥" },
          { name: "Eighteff", grade: "10", branch: "–Æ–≥" },
          { name: "Didiblad", grade: "9", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4,5] }
      ]
    },
    {
      name: "–ü–æ–ª—É—Ñ–∏–Ω–∞–ª",
      packs: [
        { title: "–ü–∞—á–∫–∞ H", teams: [
          { name: "Xex", grade: "9", branch: "–Æ–≥" },
          { name: "Selo", grade: "10", branch: "–Æ–≥" },
          { name: "Foot‚Äôa", grade: "11", branch: "–Æ–≥" },
          { name: "SAMO", grade: "10", branch: "–Æ–≥" },
          { name: "Koshkas", grade: "7", branch: "–Æ–≥" },
          { name: "Bam", grade: "8", branch: "–Æ–≥" },
          { name: "Ermogagi", grade: "8", branch: "–Æ–≥" },
          { name: "Kozlatki", grade: "9", branch: "–Æ–≥" },
          { name: "Buymeraf", grade: "7", branch: "–Æ–≥" },
          { name: "MMM", grade: "9", branch: "–Æ–≥" },
          { name: "7h384115", grade: "7", branch: "–Æ–≥" }
        ], winnerIndex: [0,1,2,3,4] }
      ]
    },
    {
      name: "–§–∏–Ω–∞–ª",
      winnerchamp: { pack:0 , index: 0},
      packs: [
        { title: "–§–∏–Ω–∞–ª—å–Ω–∞—è –ø–∞—á–∫–∞", teams: [
          { name: "SAMO", grade: "10", branch: "–Æ–≥" },
          { name: "Xex", grade: "9", branch: "–Æ–≥" },
          { name: "Grishland", grade: "9", branch: "–°–µ–≤–µ—Ä" },
          { name: "Foot‚Äôa", grade: "11", branch: "–Æ–≥" },
          { name: "Koshkas", grade: "7", branch: "–Æ–≥" },
          { name: "Tapochek", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "Pomidor", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "Shishki", grade: "10", branch: "–°–µ–≤–µ—Ä" },
          { name: "MMM", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "Selo", grade: "10", branch: "–Æ–≥" }
        ] }
      ]
    }
  ];

  function deepCopy(obj){ return JSON.parse(JSON.stringify(obj)); }
  function prepareRenderData(src){ return deepCopy(src); }

  const ROOT = qs('#mecom-bracket');
  if(!ROOT) return;

  const navEl = qs('#mecomRoundsNav', ROOT);
  const swiper = qs('#mecomSwiper', ROOT);
  const track = qs('#mecomSwiperTrack', ROOT);
  const dotsEl = qs('#mecomDots', ROOT);

  const STORAGE_KEY = ROOT.getAttribute('data-storage-key') || 'mecom_bracket_state_vX';
  let renderData = prepareRenderData(TOURNAMENT_DATA);

  function renderNav(activeIdx=0){
    navEl.innerHTML = '';
    renderData.forEach((r, idx)=>{
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'mecom-chip' + (idx === activeIdx ? ' is-active' : '');
      btn.textContent = r.name || `–†–∞—É–Ω–¥ ${idx+1}`;
      btn.addEventListener('click', ()=> goTo(idx));
      navEl.appendChild(btn);
    });
  }
  function renderDots(activeIdx=0){
    dotsEl.innerHTML = '';
    renderData.forEach((_, idx)=>{
      const d = document.createElement('div');
      d.className = 'mecom-dot' + (idx === activeIdx ? ' is-active' : '');
      d.addEventListener('click', ()=> goTo(idx));
      dotsEl.appendChild(d);
    });
  }

  function renderSlides(){
    track.innerHTML = '';
    renderData.forEach((round, rIndex)=>{
      const slide = document.createElement('div');
      slide.className = 'mecom-slide';

      const title = document.createElement('div');
      title.className = 'mecom-round-title';
      const left = document.createElement('div'); left.textContent = round.name || `–†–∞—É–Ω–¥ ${rIndex+1}`;
      title.appendChild(left);
      slide.appendChild(title);

      (round.packs || []).forEach((pack, pIndex)=>{
        const packEl = document.createElement('div');
        packEl.className = 'pack';

        const packTitle = document.createElement('div');
        packTitle.className = 'pack-title';
        packTitle.textContent = pack.title || `–ü–∞—á–∫–∞ ${pIndex+1}`;
        packEl.appendChild(packTitle);

        const contents = document.createElement('div'); contents.className = 'pack-contents';

        (pack.teams || []).forEach((team, tIndex)=>{
          if(!team || !team.name){
            if(RENDER_OPTIONS.keepEmptySlots){
              const teamEl = document.createElement('div');
              teamEl.className = 'mecom-team empty-slot placeholder';
              const leftBlock = document.createElement('div'); leftBlock.className = 'left';
              const rightBlock = document.createElement('div'); rightBlock.className = 'name-wrap';
              const nameDiv = document.createElement('div'); nameDiv.className = 'team-name';
              nameDiv.textContent = '(–ø—É—Å—Ç–æ)';
              rightBlock.appendChild(nameDiv);
              teamEl.appendChild(leftBlock);
              teamEl.appendChild(rightBlock);
              contents.appendChild(teamEl);
            }
            return;
          }

          const teamEl = document.createElement('div');
          teamEl.className = 'mecom-team';

          if(typeof pack.winnerIndex === 'number' && pack.winnerIndex === tIndex) teamEl.classList.add('winner');
          else if(Array.isArray(pack.winnerIndex) && pack.winnerIndex.includes(tIndex)) teamEl.classList.add('winner');

          const isChampion =
            (typeof pack.winnerchampIndex === 'number' && pack.winnerchampIndex === tIndex)
            || (round && round.winnerchamp && round.winnerchamp.pack === pIndex && round.winnerchamp.index === tIndex);

          if(isChampion){
            teamEl.classList.add('champion');
            teamEl.classList.remove('winner');
          }

          const leftBlock = document.createElement('div'); leftBlock.className = 'left';
          const cls = document.createElement('span'); cls.className = 'mecom-tag mecom-tag-grade';
          cls.textContent = team && team.grade ? `${team.grade} –∫–ª–∞—Å—Å` : '';
          const br = document.createElement('span');
          let branchClass = '';
          if(team && team.branch){
            const b = String(team.branch).toLowerCase();
            if(b.includes('—Å–µ–≤–µ—Ä')) branchClass = 'mecom-tag-north';
            else if(b.includes('—é–≥')) branchClass = 'mecom-tag-south';
            else if(b.includes('–≤–æ—Å—Ç')) branchClass = 'mecom-tag-east';
            else if(b.includes('–∑–∞–ø')) branchClass = 'mecom-tag-west';
            else branchClass = 'mecom-tag-north';
          }
          br.className = 'mecom-tag ' + branchClass;
          br.textContent = team && team.branch ? team.branch : '';
          leftBlock.appendChild(cls);
          leftBlock.appendChild(br);

          const rightBlock = document.createElement('div'); rightBlock.className = 'name-wrap';
          const nameDiv = document.createElement('div'); nameDiv.className = 'team-name';
          nameDiv.textContent = team && team.name ? team.name : '(–ø—É—Å—Ç–æ)';
          rightBlock.appendChild(nameDiv);

          teamEl.appendChild(leftBlock);
          teamEl.appendChild(rightBlock);
          contents.appendChild(teamEl);
        });

        packEl.appendChild(contents);
        slide.appendChild(packEl);
      });

      track.appendChild(slide);
    });

    requestAnimationFrame(()=> {
      qsa('.mecom-slide', track).forEach(el => el.classList.add('show'));
      setTimeout(()=> updateHeightForSlide(current), 30);
    });
  }

  let current = 0;
  let startX = 0, startY = 0, curX = 0;
  let dragging = false;
  let width = 0;
  let lastMoveAt = 0;

  function setTranslate(px, withAnim=true){
    track.style.transition = withAnim ? 'transform .26s ease' : 'none';
    track.style.transform = `translate3d(${px}px,0,0)`;
  }
  function updateWidth(){ width = swiper.clientWidth || 1; }

  function updateHeightForSlide(i){
    const slide = track.children[i];
    if(!slide){ swiper.style.height = '120px'; return; }
    const h = Math.ceil(slide.getBoundingClientRect().height);
    swiper.style.height = (Math.max(h, 80)) + 'px';
  }

  function goTo(i){
    current = Math.max(0, Math.min(i, renderData.length-1));
    setTranslate(-current*width, true);
    setTimeout(()=> updateHeightForSlide(current), 120);
    const chips = navEl.querySelectorAll('.mecom-chip');
    chips.forEach((c, idx)=> c.classList.toggle('is-active', idx===current));
    const dots = dotsEl.querySelectorAll('.mecom-dot');
    dots.forEach((d, idx)=> d.classList.toggle('is-active', idx===current));
  }

  function onStart(e){
    const touch = e.touches ? e.touches[0] : e;
    startX = touch.clientX;
    startY = touch.clientY;
    curX = startX;
    dragging = true;
    lastMoveAt = performance.now();
    track.style.transition = 'none';
  }
  function onMove(e){
    if(!dragging) return;
    const touch = e.touches ? e.touches[0] : e;
    const dx = touch.clientX - startX;
    const dy = touch.clientY - startY;
    if(Math.abs(dy) > Math.abs(dx)){
      dragging = false;
      setTranslate(-current*width, false);
      return;
    }
    if(e.cancelable) e.preventDefault();
    curX = touch.clientX;
    const base = -current * width;
    setTranslate(base + dx, false);
    lastMoveAt = performance.now();
  }
  function onEnd(){
    if(!dragging) return;
    dragging = false;
    const dx = (curX || startX) - startX;
    const dt = Math.max(1, performance.now() - lastMoveAt);
    const velocity = Math.abs(dx)/dt;
    const threshold = width * 0.18;
    if(dx < -threshold || (dx < -10 && velocity > 0.6)) goTo(current + 1);
    else if(dx > threshold || (dx > 10 && velocity > 0.6)) goTo(current - 1);
    else goTo(current);
  }

  function saveState(obj){
    try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(obj)); }catch(e){}
  }
  function loadState(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return null;
      return JSON.parse(raw);
    }catch(e){ return null; }
  }

  function renderAll(){
    renderSlides();
    renderNav(current);
    renderDots(current);
    setTranslate(-current*width, false);
    updateHeightForSlide(current);
  }

  function attachSwipe(){
    updateWidth();
    updateHeightForSlide(current);

    swiper.addEventListener('touchstart', onStart, {passive:true});
    swiper.addEventListener('touchmove',  onMove,  {passive:false});
    swiper.addEventListener('touchend',   onEnd,   {passive:true});

    swiper.addEventListener('mousedown', (e)=>{
      e.preventDefault();
      onStart(e);
      window.addEventListener('mousemove', onMove);
      window.addEventListener('mouseup', onMouseUpOnce);
    });

    function onMouseUpOnce(){
      onEnd();
      window.removeEventListener('mousemove', onMove);
      window.removeEventListener('mouseup', onMouseUpOnce);
    }

    window.addEventListener('resize', ()=>{
      updateWidth();
      setTranslate(-current*width, false);
      updateHeightForSlide(current);
    }, {passive:true});
  }

  function init(){
    const saved = loadState();
    if(saved && Array.isArray(saved)){
      renderData = saved;
    } else {
      renderData = prepareRenderData(TOURNAMENT_DATA);
    }

    renderAll();
    attachSwipe();

    window.MECOM_BRACKET_V2 = {
      getState: ()=> deepCopy(renderData),
      setState: (obj)=>{ if(Array.isArray(obj)){ renderData = deepCopy(obj); saveState(renderData); renderAll(); } },
      resetDefaults: ()=> { renderData = prepareRenderData(TOURNAMENT_DATA); saveState(renderData); renderAll(); }
    };
  }
  init();
})();

/* =========================
   Secret Pixel (optimized: debounce resize, less global blocking)
   ========================= */
let secretClickLock = 0;

function closeSecretMission() {
  const overlay = document.querySelector('.overlay');
  const alertBox = document.querySelector('.secret-mission-alert');
  if (overlay) overlay.remove();
  if (alertBox) alertBox.remove();
}

function createSecretPixel() {
  const oldPixel = document.getElementById('secret-pixel');
  if (oldPixel) oldPixel.remove();

  const pixel = document.createElement('div');
  pixel.id = 'secret-pixel';
  pixel.className = 'secret-pixel';

  const marginSize = 30;
  const fieldPosition = Math.floor(Math.random() * 4);
  let posX, posY;

  switch(fieldPosition) {
    case 0:
      posX = Math.floor(Math.random() * window.innerWidth);
      posY = Math.floor(Math.random() * marginSize);
      pixel.innerHTML = `<div class="pixel-tooltip" style="bottom: -15px; left: 50%; transform: translateX(-50%);">üéÅ –ù–∞–∂–º–∏!</div>`;
      break;
    case 1:
      posX = window.innerWidth - Math.floor(Math.random() * marginSize);
      posY = Math.floor(Math.random() * window.innerHeight);
      pixel.innerHTML = `<div class="pixel-tooltip" style="top: 50%; left: -40px; transform: translateY(-50%);">üéÅ –ù–∞–∂–º–∏!</div>`;
      break;
    case 2:
      posX = Math.floor(Math.random() * window.innerWidth);
      posY = window.innerHeight - Math.floor(Math.random() * marginSize);
      pixel.innerHTML = `<div class="pixel-tooltip" style="top: -15px; left: 50%; transform: translateX(-50%);">üéÅ –ù–∞–∂–º–∏!</div>`;
      break;
    default:
      posX = Math.floor(Math.random() * marginSize);
      posY = Math.floor(Math.random() * window.innerHeight);
      pixel.innerHTML = `<div class="pixel-tooltip" style="top: 50%; right: -40px; transform: translateY(-50%);">üéÅ –ù–∞–∂–º–∏!</div>`;
  }

  pixel.style.left = posX + 'px';
  pixel.style.top = posY + 'px';

  pixel.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();

    const now = Date.now();
    if(now - secretClickLock < 5000) return;
    secretClickLock = now;

    const overlay = document.createElement('div');
    overlay.className = 'overlay';

    const mekomBackground = document.createElement('div');
    mekomBackground.className = 'mekom-background';
    for (let i = 0; i < 4; i++) {
      const mekomText = document.createElement('div');
      mekomText.className = 'mekom-text';
      mekomText.textContent = '–ú–≠–ö–û–ú –ú–≠–ö–û–ú –ú–≠–ö–û–ú –ú–≠–ö–û–ú –ú–≠–ö–û–ú';
      mekomBackground.appendChild(mekomText);
    }
    overlay.appendChild(mekomBackground);

    const copyText = "¬´–Ø –∑–∞–º–µ—Ç–∏–ª(–∞) —Ç–æ—Ç —Å–∞–º—ã–π —Å—Ç—Ä–∞–Ω–Ω—ã–π —Å–±–æ–π! –ú–æ–∏ 25–∫ –±–∞–ª–ª–æ–≤ –≥–æ—Ç–æ–≤—ã?¬ª";

    const alertBox = document.createElement('div');
    alertBox.className = 'secret-mission-alert';
    alertBox.innerHTML = `
      <div>
        <div class="emoji">üïµÔ∏è‚Äç‚ôÄÔ∏è</div>
        <h3>–ó–∞—Å–µ–∫—Ä–µ—á–µ–Ω–Ω–∞—è –º–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!</h3>
        <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –∞–≥–µ–Ω—Ç! –í—ã –Ω–∞—à–ª–∏ —Ç–∞–π–Ω—ã–π –∫—É–ø–æ–Ω –Ω–∞ <strong>25 000 –±–∞–ª–ª–æ–≤</strong>!</p>
        <p><strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:</strong></p>
        <ol>
          <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —á–∞—Ç:<br>
            <a href="https://t.me/mekom_chat" target="_blank" class="telegram-link" rel="noopener">https://t.me/mekom_chat</a>
          </li>
          <li>–°–æ–æ–±—â–∏—Ç–µ –∫–æ–¥–æ–≤—É—é —Ñ—Ä–∞–∑—É (–Ω–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å):</li>
        </ol>
        <div class="copy-text-block" id="copyTextBlock">${copyText}<span class="copy-indicator">üìã</span></div>
        <p>–ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º –∏ –∑–∞—á–∏—Å–ª–∏–º –ø—Ä–∏–∑.</p>
        <div class="prize-note">¬´–ü–ª—é—à–∫–∞ ‚Äî –ø–µ—Ä–≤–æ–º—É, –∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.¬ª</div>
        <button class="close-button" id="closeSecret">–ü–æ–Ω—è—Ç–Ω–æ! üéØ</button>
      </div>
    `;

    document.body.appendChild(overlay);
    document.body.appendChild(alertBox);

    const copyEl = document.getElementById('copyTextBlock');
    copyEl.addEventListener('click', function() {
      const textInQuotes = copyText.replace(/¬´(.*)¬ª/, '$1');
      const indicator = this.querySelector('.copy-indicator');

      const ok = () => {
        indicator.textContent = ' ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        setTimeout(() => { indicator.textContent = 'üìã'; }, 2000);
      };

      if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(textInQuotes).then(ok).catch(()=>{
          const ta = document.createElement('textarea');
          ta.value = textInQuotes;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
          ok();
        });
      } else {
        const ta = document.createElement('textarea');
        ta.value = textInQuotes;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        ok();
      }
    });

    document.getElementById('closeSecret').addEventListener('click', ()=>{
      closeSecretMission();
      setTimeout(createSecretPixel, 900);
    });

    // close on overlay click
    overlay.addEventListener('click', ()=>{ closeSecretMission(); setTimeout(createSecretPixel, 900); });

    // animate pixel pop + remove
    this.classList.add('pixel-pop');
    setTimeout(()=>{ this.remove(); }, 650);
  });

  document.body.appendChild(pixel);
}

window.addEventListener('load', ()=>{ setTimeout(createSecretPixel, 1000); });

// debounced resize
let spResizeTimer = null;
window.addEventListener('resize', ()=>{
  clearTimeout(spResizeTimer);
  spResizeTimer = setTimeout(createSecretPixel, 350);
});

/* =========================
   Theme + music settings (persist)
   ========================= */
(function initSettings(){
  const root = document.documentElement;
  const themeBtn = document.getElementById('themeToggle');
  const musicBtn = document.getElementById('musicToggle');
  const volume = document.getElementById('musicVolume');
  const audio = document.getElementById('bgm');

  const store = {
    get(k, fallback){ try{ return localStorage.getItem(k) ?? fallback; }catch(e){ return fallback; } },
    set(k,v){ try{ localStorage.setItem(k, v); }catch(e){} }
  };

  let theme = store.get('me_theme', 'light');
  let music = store.get('me_music', 'off');
  let vol = parseFloat(store.get('me_volume', '0.35'));
  if(Number.isNaN(vol)) vol = 0.35;

  function applyTheme(){
    root.dataset.theme = theme;
    if(themeBtn){
      themeBtn.setAttribute('aria-pressed', theme === 'dark' ? 'true' : 'false');
      themeBtn.textContent = (theme === 'dark' ? '‚òÄÔ∏è –¢–µ–º–∞' : 'üåô –¢–µ–º–∞');
    }
  }

  function applyVolume(){
    if(volume) volume.value = String(vol);
    if(audio) audio.volume = vol;
    store.set('me_volume', String(vol));
  }

  async function playMusic(){
    if(!audio) return;
    audio.volume = vol;
    try{
      await audio.play();
      music = 'on';
      store.set('me_music', 'on');
      if(musicBtn){
        musicBtn.setAttribute('aria-pressed','true');
        musicBtn.textContent = '‚è∏ –ú—É–∑—ã–∫–∞';
      }
    }catch(e){}
  }

  function pauseMusic(){
    if(!audio) return;
    audio.pause();
    music = 'off';
    store.set('me_music', 'off');
    if(musicBtn){
      musicBtn.setAttribute('aria-pressed','false');
      musicBtn.textContent = '‚ñ∂Ô∏è –ú—É–∑—ã–∫–∞';
    }
  }

  if(themeBtn){
    themeBtn.addEventListener('click', ()=>{
      theme = (theme === 'dark') ? 'light' : 'dark';
      store.set('me_theme', theme);
      applyTheme();
    });
  }

  if(volume){
    volume.addEventListener('input', ()=>{
      vol = parseFloat(volume.value);
      applyVolume();
    });
  }

  if(musicBtn){
    musicBtn.addEventListener('click', ()=>{
      if(!audio) return;
      if(audio.paused) playMusic();
      else pauseMusic();
    });
  }

  document.addEventListener('pointerdown', ()=>{
    if(music === 'on') playMusic();
  }, {once:true});

  applyTheme();
  applyVolume();
  if(musicBtn){
    musicBtn.setAttribute('aria-pressed', music === 'on' ? 'true' : 'false');
    musicBtn.textContent = (music === 'on' ? '‚è∏ –ú—É–∑—ã–∫–∞' : '‚ñ∂Ô∏è –ú—É–∑—ã–∫–∞');
  }
  if(music === 'on') playMusic();
})();
</script>
</body>
</html>